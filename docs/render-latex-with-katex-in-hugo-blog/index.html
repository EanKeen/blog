<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.45" />


<title>Render LaTeX with KaTex in Hugo Blog - Edwin&#39;s Blog</title>
<meta property="og:title" content="Render LaTeX with KaTex in Hugo Blog - Edwin&#39;s Blog">



  






<link rel="stylesheet" href="https://eankeen.github.io/Blog/css/main.css" media="all">
<link rel="stylesheet" href="https://eankeen.github.io/Blog/css/fonts.css">

  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="https://eankeen.github.io/Blog/" class="nav-logo">
    <img src="https://eankeen.github.io/Blog/images/logo.png" 
         width="50" 
         height="50" 
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/Blog/categories">Categories</a></li>
    
    <li><a href="/Blog/tags">Tags</a></li>
    
    <li><a href="/Blog/about/">About</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">
  <article class="article">
    <h1 class="article-title">Render LaTeX with KaTex in Hugo Blog</h1>
    
    <span class="article-date">2018-09-15</span>
    

    <div class="article-content">
      <p>Just recently, I added support to render LaTex math equations with the rendering engine <a href="https://katex.org/">KaTeX</a> for this blog. I chose it over MathJax because it performs <a href="https://jsperf.com/katex-vs-mathjax">substantially faster</a> than MathJax. To integrate KaTeX in my Hugo blog, I had to use the <a href="https://github.com/mmarkdown/mmark">Mmark</a> Markdown processor rather than Hugo's default <a href="https://github.com/russross/blackfriday">Blackfriday</a> processor.</p>

<p>There are three steps to follow so you can write LaTeX in markdown for KaTeX to use.</p>

<ol>
<li>Create a KateX partial</li>
<li>Integrate the KateX partial in your header or footer element</li>
<li>Activate the KaTeX partial in the markdown file</li>
</ol>

<h2 id="create-a-katex-partial">Create a KaTex partial</h2>

<p>To get KaTex to work, you have to to import their JavaScript and CSS files. We're going to do this using Hugo partials. To do this, create a <code>katex.html</code> partial in your <code>layouts/partials</code> directory of your Hugo project. In this file, just import the <a href="https://katex.org/docs/browser.html">required files</a></p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#999;font-style:italic">&lt;!-- CSS File --&gt;</span>
&lt;<span style="color:#6ab825;font-weight:bold">link</span> <span style="color:#bbb">rel</span>=<span style="color:#ed9d13">&#34;stylesheet&#34;</span> <span style="color:#bbb">href</span>=<span style="color:#ed9d13">&#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css&#34;</span> <span style="color:#bbb">integrity</span>=<span style="color:#ed9d13">&#34;sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv&#34;</span> <span style="color:#bbb">crossorigin</span>=<span style="color:#ed9d13">&#34;anonymous&#34;</span>&gt;

<span style="color:#999;font-style:italic">&lt;!-- JS Fle --&gt;</span>
&lt;<span style="color:#6ab825;font-weight:bold">script</span> <span style="color:#bbb">defer</span> <span style="color:#bbb">src</span>=<span style="color:#ed9d13">&#34;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js&#34;</span> <span style="color:#bbb">integrity</span>=<span style="color:#ed9d13">&#34;sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O&#34;</span> <span style="color:#bbb">crossorigin</span>=<span style="color:#ed9d13">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#6ab825;font-weight:bold">script</span>&gt;</code></pre></div>
<h2 id="integrating-the-katex-partial">Integrating the KaTeX partial</h2>

<p>After creating the <code>katex.html</code> partial file, now you have to include it in some element that is common in all your built site files, such as a header or footer element.</p>

<p>I'm going to add it in my footer partial. So, create a <code>footer.html</code> partial in your <code>layouts/partials</code> directory, if you don't have one already. Since I have a theme, I copied the theme's <code>footer.html</code> partial and pasted it into my own <code>footer.html</code> partial. Note that your <code>footer.html</code> partial will override the theme's.</p>

<p>Then, add the following to the <code>footer.html</code> partial, outside of the body tag, but inside of the html tag.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ if .Params.katex}}{{ partial &#34;katex.html&#34; . }}{{ end }}</code></pre></div>
<p>My entire <code>footer.html</code> file ended up looking like the following.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#6ab825;font-weight:bold">footer</span> <span style="color:#bbb">class</span>=<span style="color:#ed9d13">&#34;footer&#34;</span>&gt;
  <span style="color:#999;font-style:italic">&lt;!-- Footer contents hidden for brevity --&gt;</span>
&lt;/<span style="color:#6ab825;font-weight:bold">footer</span>&gt;
&lt;/<span style="color:#6ab825;font-weight:bold">div</span>&gt;

&lt;/<span style="color:#6ab825;font-weight:bold">body</span>&gt;
{{ if .Params.katex}}{{ partial &#34;katex.html&#34; . }}{{ end }}
&lt;/<span style="color:#6ab825;font-weight:bold">html</span>&gt;</code></pre></div>
<p>Everything else except that one line was copied and pasted from my theme's <code>footer.html</code> file.</p>

<p>By adding the <code>katex.html</code> partial to the <code>footer.html</code> partial conditionally, now you can specify if you want to use KaTex for each markdown file separately. That way, you don't have to serve KaTex JS and CSS files for blog posts that don't actually use them.</p>

<h2 id="using-the-katex-partial">Using the KaTex partial</h2>

<p>Now, using the KaTex partial is trivial. In your Hugo <a href="https://gohugo.io/content-management/front-matter/">front matter</a> (of any markdown file), add the following lines.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---<span style="color:#666">
</span><span style="color:#666"></span>katex:<span style="color:#666"> </span><span style="color:#6ab825;font-weight:bold">true</span><span style="color:#666">
</span><span style="color:#666"></span>markup:<span style="color:#666"> </span><span style="color:#ed9d13">&#34;mmark&#34;</span><span style="color:#666">
</span><span style="color:#666"></span>---</code></pre></div>
<p>Now, your <code>katex.html</code> partial will be used, which allows KaTex to render your LaTeX. Additionally, this activates the Mmark parsing engine, which is already integrated with Hugo. Using the Mmark parsing engine prevents <a href="https://gohugo.io/content-management/formats/#issues-with-markdown">the problems</a> the default Blackfriday parsing engine has.</p>

<h2 id="writing-latex-in-markdown-for-mmark">Writing LaTex in Markdown for Mmark</h2>

<p>Now you can write LaTex in markdown! ðŸŽ‰
It's intuitive writing LateX in markdown using the Mmark processor. You can display equations on the block level or inline. Note that you must use Mmark, or this will not work. Using the default Blackfriday processor will make all of these inline (using a single dollar sign as a delimiter will not work).</p>

<h3 id="display-block">Display Block</h3>

<p>Type equation on a single line, with top and bottom spaces. Use double dollar signs as delimiter.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">The following<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>$$\int_{a}^{b} x^2 dx$$<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>Is an integral</code></pre></div>
<p>The following</p>

<p><span  class="math">\[\int_{a}^{b} x^2 dx\]</span></p>

<p>Is an integral</p>

<h3 id="display-inline">Display Inline</h3>

<p>Type the equation as per usual, nothing extra needed. Use double dollar signs as delimiter.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">Integrate $$\int x^3 dx$$</code></pre></div>
<p>Integrate <span  class="math">\(\int x^3 dx\)</span></p>

<p><br/>
It turns out, using KaTeX rather than MathJax was easier than I thought. I hope you found this helpful. ðŸ˜„</p>

    </div>
 
    <ul class="article-taxonomy">
                  
      <hr>
      <li>
        <i class="fa fa-category"></i><a href="/Blog/categories/blog-updates">Blog Updates</a><a href="/Blog/categories/tutorials">Tutorials</a>
      </li>
      
    
      
      <li>
        <i class="fa fa-tags"></i><a href="/Blog/tags/latex">LaTeX</a><a href="/Blog/tags/katex">KaTeX</a>
      </li>
      
  </article>

</main>

<footer class="footer">
  <ul class="footer-links">
    <li>
      <a href="https://eankeen.github.io/Blog/index.xml" type="application/rss+xml" target="_blank"><i class="fa fa-rss"></i> RSS feed</a>
    </li>
    <li>
      <a href="/blog">Home</a>
    </li>
    <li>
      <a href="https://eankeen.github.io/Blog/site-notice">Site notice</a>
    </li>
  </ul>
</footer>

</div>

</body>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"
  onload="renderMathInElement(document.body);">
</script>

</html>

